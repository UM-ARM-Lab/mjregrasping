<mujoco model="untangle">
    <default>
        <joint stiffness="0.5"/>
        <geom friction="0.1"/>
        <default class="visual">
            <!-- any geom with the class "visual" will not collide with anything -->
            <geom contype="0" conaffinity="0" group="2"/>
        </default>
    </default>
    <include file="materials.xml"/>
    <include file="val.xml"/>
    <!-- override the high viscosity used in sim experiments because it's unrealistic -->
    <option viscosity="0.01" timestep="0.003"/>
    <include file="real_obs.xml"/>
    <include file="floor.xml"/>
    <include file="cc_sphere.xml"/>
    <worldbody>
        <!-- used for recording what happens in the simulation -->
        <body name="mycamera">
            <camera mode="fixed" name="mycamera" xyaxes="1 -0.4 0 0 1 1" pos="-0.3 -0.5 1.4"/>
        </body>
        <light name="overhead1" pos="0 0 10" mode="trackcom"/>
        <body pos="0.39 0.93 0.68" euler="0 0 -1.3" name="rope">
            <inertial pos="0 0 0" quat="1 0 0 0" mass="0.1" diaginertia="0.001 0.001 0.001"/>
            <composite type="cable" curve="s" count="25 1 1" size="1.24 0.22 1">
                <joint kind="main" damping=".02" stiffness="0.03"/>
                <geom type="capsule" size=".01" rgba="0.8 0.2 0.1 1" condim="1" group="1"/>
            </composite>
            <joint type="free" damping="100"/>
        </body>
    </worldbody>
    <equality>
        <weld body1="drive50" body2="B_first" name="left" relpose="0 0 0.130 1 0 0 0" active="false" solref="0.03 1" torquescale="2"/>
        <weld body1="drive10" body2="B_first" name="right" relpose="0 0 0.130 1 0 0 0" active="false" solref="0.03 1" torquescale="2"/>

        <connect body1="attach" body2="B_first" name="attach" anchor="0 0 0" active="true" solref="0.03 1"/>

        <!-- constraints to pull the mujoco rope towards where CDCPD says the rope is -->
        <connect body1="world" body2="B_first" name="B_0" anchor="0 0 0" active="false" solref="0.1 1"/>
        <connect body1="world" body2="B_1" name="B_1" anchor="0 0 0" active="false" solref="0.1 1"/>
        <connect body1="world" body2="B_2" name="B_2" anchor="0 0 0" active="false" solref="0.1 1"/>
        <connect body1="world" body2="B_3" name="B_3" anchor="0 0 0" active="false" solref="0.1 1"/>
        <connect body1="world" body2="B_4" name="B_4" anchor="0 0 0" active="false" solref="0.1 1"/>
        <connect body1="world" body2="B_5" name="B_5" anchor="0 0 0" active="false" solref="0.1 1"/>
        <connect body1="world" body2="B_6" name="B_6" anchor="0 0 0" active="false" solref="0.1 1"/>
        <connect body1="world" body2="B_7" name="B_7" anchor="0 0 0" active="false" solref="0.1 1"/>
        <connect body1="world" body2="B_8" name="B_8" anchor="0 0 0" active="false" solref="0.1 1"/>
        <connect body1="world" body2="B_9" name="B_9" anchor="0 0 0" active="false" solref="0.1 1"/>
        <connect body1="world" body2="B_10" name="B_10" anchor="0 0 0" active="false" solref="0.1 1"/>
        <connect body1="world" body2="B_11" name="B_11" anchor="0 0 0" active="false" solref="0.1 1"/>
        <connect body1="world" body2="B_12" name="B_12" anchor="0 0 0" active="false" solref="0.1 1"/>
        <connect body1="world" body2="B_13" name="B_13" anchor="0 0 0" active="false" solref="0.1 1"/>
        <connect body1="world" body2="B_14" name="B_14" anchor="0 0 0" active="false" solref="0.1 1"/>
        <connect body1="world" body2="B_15" name="B_15" anchor="0 0 0" active="false" solref="0.1 1"/>
        <connect body1="world" body2="B_16" name="B_16" anchor="0 0 0" active="false" solref="0.1 1"/>
        <connect body1="world" body2="B_17" name="B_17" anchor="0 0 0" active="false" solref="0.1 1"/>
        <connect body1="world" body2="B_18" name="B_18" anchor="0 0 0" active="false" solref="0.1 1"/>
        <connect body1="world" body2="B_19" name="B_19" anchor="0 0 0" active="false" solref="0.1 1"/>
        <connect body1="world" body2="B_20" name="B_20" anchor="0 0 0" active="false" solref="0.1 1"/>
        <connect body1="world" body2="B_21" name="B_21" anchor="0 0 0" active="false" solref="0.1 1"/>
        <connect body1="world" body2="B_22" name="B_22" anchor="0 0 0" active="false" solref="0.1 1"/>
        <connect body1="world" body2="B_last" name="B_23" anchor="0 0 0" active="false" solref="0.1 1"/>
        <connect body1="world" body2="B_last" name="B_24" anchor="0 0 0" active="false" solref="0.1 1"/>
    </equality>
</mujoco>
